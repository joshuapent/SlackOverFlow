{% extends 'base.html' %}
{% block content %}


<div class="post-section">
    <div class="post-container">
        <div class="post-text">
            <div class="post-header">
                <div class="post-user">
                {% block post_user %}
                    <p> {{ post.user }}</p>
                {% endblock %}
                </div>
                <div class="post-title">
                {% block post_title %}
                    <h1> {{ post.title }} </h1>
                {% endblock %}
                </div>
            </div>

            <div class="post-body">
                {% block post_content %}

                <p> {{ post.text }}</p>
                
                {% endblock %}
            </div>
        </div>
        <div class="post-footer">
            {% block post_footer %}
            <div class="comment-display">
                {% block comment_click %}
                <a href="{% url 'comment' post.id %}">Comment</a>
                {% endblock %}
            </div>
            <div class="edit-or-delete-post">
                <a href="{% url 'post_update' post.id %}">Edit</a>
                <a href="{% url 'post_delete' post.id %}">Delete</a>
            </div>
            {% endblock %}
        </div>
    </div>
</div>
<div class="comment-create-Section">
    <div class="comment-create-widget">
        {% block comment_create %}
        {% endblock %}
    </div>
</div>
<div class="comment-section">
    {% for comment in comments %}
        <div class="comment">
            {% if comment.post.id == post.id  %}
                <div class="comment-header">
                    {% block comment_header %}

                    <h3>{{comment.user}}</h3>

                    {% endblock %}
                </div>
                <div class="comment-body">
                    {% if comment.id == selected_comment.id %}
                    
                    {%  block comment_body_var %}

                    {% endblock %}

                    {% else %}

                    {% block comment_body %}

                        <p>{{comment.text}}</p>

                    {% endblock %}

                    {% endif %}
                </div>
                <div class="comment-options">
 
                    {% if comment.id == selected_comment.id %}
                    
                    {%  block comment_options_var %}

                    {% endblock %}

                    {% else %}

                    {% block comment_options %}
                    <a href="#comment">
                    <a href="{% url 'comment_edit' post.id comment.id %}">Edit</a></a>
                    <a href="{% url 'comment_delete' post.id comment.id %}">Delete</a>
                    {% endblock %}

                    {% endif %}
                    <div class="upvote">
                        <form action="{% url 'upvote' post.id comment.id %}" method="POST">
                            {% csrf_token %}
                            <input type="submit" value='Upvote'>
                        </form>
                    </div>
                    <div class="likes">Upvotes: {{comment.upvote_count}}</div>
                </div>
            {% endif %}
        </div>
    {% endfor %}
</div>

{% endblock %}